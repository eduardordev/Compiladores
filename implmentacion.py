
diccionarios = [{0: {' ': 1, '\t': 1, '\n': 1}, 1: {' ': {}, '\t': {}, '\n': {}}}, {0: {' ': 1, '\t': 1, '\n': 1}, 1: {' ': 1, '\t': 1, '\n': 1}}, {0: {'0': 1, '1': 1, '2': 1, '3': 1, '4': 1, '5': 1, '6': 1, '7': 1, '8': 1, '9': 1}, 1: {'0': {}, '1': {}, '2': {}, '3': {}, '4': {}, '5': {}, '6': {}, '7': {}, '8': {}, '9': {}}}, {0: {'0': 1, '1': 1, '2': 1, '3': 1, '4': 1, '5': 1, '6': 1, '7': 1, '8': 1, '9': 1}, 1: {'0': 1, '1': 1, '2': 1, '3': 1, '4': 1, '5': 1, '6': 1, '7': 1, '8': 1, '9': 1}}, {0: {'+': 1, '-': 1}, 1: {'+': {}, '-': {}}}, {0: {'0': 1, '1': 1, '2': 1, '3': 1, '4': 1, '5': 1, '6': 1, '7': 1, '8': 1, '9': 1, ',': {}, '+': {}, '-': {}}, 1: {'0': {}, '1': {}, '2': {}, '3': {}, '4': {}, '5': {}, '6': {}, '7': {}, '8': {}, '9': {}, ',': 2, '+': {}, '-': {}}, 2: {'0': 3, '1': 3, '2': 3, '3': 3, '4': 3, '5': 3, '6': 3, '7': 3, '8': 3, '9': 3, ',': {}, '+': {}, '-': {}}, 3: {'0': 3, '1': 3, '2': 3, '3': 3, '4': 3, '5': 3, '6': 3, '7': 3, '8': 3, '9': 3, ',': 2, '+': {}, '-': {}}}, {0: {'a': 1, 'b': 1, 'c': 1, 'd': 1, 'e': 1, 'f': 1, 'g': 1, 'h': 1, 'i': 1, 'j': 1, 'k': 1, 'l': 1, 'm': 1, 'n': 1, 'o': 1, 'p': 1, 'q': 1, 'r': 1, 's': 1, 't': 1, 'u': 1, 'v': 1, 'w': 1, 'x': 1, 'y': 1, 'z': 1, 'A': 1, 'B': 1, 'C': 1, 'D': 1, 'E': 1, 'F': 1, 'G': 1, 'H': 1, 'I': 1, 'J': 1, 'K': 1, 'L': 1, 'M': 1, 'N': 1, 'O': 1, 'P': 1, 'Q': 1, 'R': 1, 'S': 1, 'T': 1, 'U': 1, 'V': 1, 'W': 1, 'X': 1, 'Y': 1, 'Z': 1}, 1: {'a': {}, 'b': {}, 'c': {}, 'd': {}, 'e': {}, 'f': {}, 'g': {}, 'h': {}, 'i': {}, 'j': {}, 'k': {}, 'l': {}, 'm': {}, 'n': {}, 'o': {}, 'p': {}, 'q': {}, 'r': {}, 's': {}, 't': {}, 'u': {}, 'v': {}, 'w': {}, 'x': {}, 'y': {}, 'z': {}, 'A': {}, 'B': {}, 'C': {}, 'D': {}, 'E': {}, 'F': {}, 'G': {}, 'H': {}, 'I': {}, 'J': {}, 'K': {}, 'L': {}, 'M': {}, 'N': {}, 'O': {}, 'P': {}, 'Q': {}, 'R': {}, 'S': {}, 'T': {}, 'U': {}, 'V': {}, 'W': {}, 'X': {}, 'Y': {}, 'Z': {}}}, {0: {'a': 1, 'b': 1, 'c': 1, 'd': 1, 'e': 1, 'f': 1, 'g': 1, 'h': 1, 'i': 1, 'j': 1, 'k': 1, 'l': 1, 'm': 1, 'n': 1, 'o': 1, 'p': 1, 'q': 1, 'r': 1, 's': 1, 't': 1, 'u': 1, 'v': 1, 'w': 1, 'x': 1, 'y': 1, 'z': 1, 'A': 1, 'B': 1, 'C': 1, 'D': 1, 'E': 1, 'F': 1, 'G': 1, 'H': 1, 'I': 1, 'J': 1, 'K': 1, 'L': 1, 'M': 1, 'N': 1, 'O': 1, 'P': 1, 'Q': 1, 'R': 1, 'S': 1, 'T': 1, 'U': 1, 'V': 1, 'W': 1, 'X': 1, 'Y': 1, 'Z': 1, '0': {}, '1': {}, '2': {}, '3': {}, '4': {}, '5': {}, '6': {}, '7': {}, '8': {}, '9': {}}, 1: {'a': 1, 'b': 1, 'c': 1, 'd': 1, 'e': 1, 'f': 1, 'g': 1, 'h': 1, 'i': 1, 'j': 1, 'k': 1, 'l': 1, 'm': 1, 'n': 1, 'o': 1, 'p': 1, 'q': 1, 'r': 1, 's': 1, 't': 1, 'u': 1, 'v': 1, 'w': 1, 'x': 1, 'y': 1, 'z': 1, 'A': 1, 'B': 1, 'C': 1, 'D': 1, 'E': 1, 'F': 1, 'G': 1, 'H': 1, 'I': 1, 'J': 1, 'K': 1, 'L': 1, 'M': 1, 'N': 1, 'O': 1, 'P': 1, 'Q': 1, 'R': 1, 'S': 1, 'T': 1, 'U': 1, 'V': 1, 'W': 1, 'X': 1, 'Y': 1, 'Z': 1, '0': 2, '1': 2, '2': 2, '3': 2, '4': 2, '5': 2, '6': 2, '7': 2, '8': 2, '9': 2}, 2: {'a': 1, 'b': 1, 'c': 1, 'd': 1, 'e': 1, 'f': 1, 'g': 1, 'h': 1, 'i': 1, 'j': 1, 'k': 1, 'l': 1, 'm': 1, 'n': 1, 'o': 1, 'p': 1, 'q': 1, 'r': 1, 's': 1, 't': 1, 'u': 1, 'v': 1, 'w': 1, 'x': 1, 'y': 1, 'z': 1, 'A': 1, 'B': 1, 'C': 1, 'D': 1, 'E': 1, 'F': 1, 'G': 1, 'H': 1, 'I': 1, 'J': 1, 'K': 1, 'L': 1, 'M': 1, 'N': 1, 'O': 1, 'P': 1, 'Q': 1, 'R': 1, 'S': 1, 'T': 1, 'U': 1, 'V': 1, 'W': 1, 'X': 1, 'Y': 1, 'Z': 1, '0': 2, '1': 2, '2': 2, '3': 2, '4': 2, '5': 2, '6': 2, '7': 2, '8': 2, '9': 2}}, {0: {'A': 1, 'B': 1, 'C': 1, 'D': 1, 'E': 1, 'F': 1}, 1: {'A': {}, 'B': {}, 'C': {}, 'D': {}, 'E': {}, 'F': {}}}, {0: {'A': 1, 'B': 1, 'C': 1, 'D': 1, 'E': 1, 'F': 1}, 1: {'A': 1, 'B': 1, 'C': 1, 'D': 1, 'E': 1, 'F': 1}}, {0: {'0': 1, '1': 1, '2': 1, '3': 1, '4': 1, '5': 1, '6': 1, '7': 1, '8': 1, '9': 1}, 1: {'0': {}, '1': {}, '2': {}, '3': {}, '4': {}, '5': {}, '6': {}, '7': {}, '8': {}, '9': {}}}, {0: {'0': 1, '1': 1, '2': 1, '3': 1, '4': 1, '5': 1, '6': 1, '7': 1, '8': 1, '9': 1}, 1: {'0': 1, '1': 1, '2': 1, '3': 1, '4': 1, '5': 1, '6': 1, '7': 1, '8': 1, '9': 1}}, {0: {'A': 1, 'B': 1, 'C': 1, 'D': 1, 'E': 1, 'F': 1, '0': 2, '1': 2, '2': 2, '3': 2, '4': 2, '5': 2, '6': 2, '7': 2, '8': 2, '9': 2}, 1: {'A': {}, 'B': {}, 'C': {}, 'D': {}, 'E': {}, 'F': {}, '0': 3, '1': 3, '2': 3, '3': 3, '4': 3, '5': 3, '6': 3, '7': 3, '8': 3, '9': 3}, 2: {'A': 4, 'B': 4, 'C': 4, 'D': 4, 'E': 4, 'F': 4, '0': {}, '1': {}, '2': {}, '3': {}, '4': {}, '5': {}, '6': {}, '7': {}, '8': {}, '9': {}}, 3: {'A': {}, 'B': {}, 'C': {}, 'D': {}, 'E': {}, 'F': {}, '0': {}, '1': {}, '2': {}, '3': {}, '4': {}, '5': {}, '6': {}, '7': {}, '8': {}, '9': {}}, 4: {'A': {}, 'B': {}, 'C': {}, 'D': {}, 'E': {}, 'F': {}, '0': 2, '1': 2, '2': 2, '3': 2, '4': 2, '5': 2, '6': 2, '7': 2, '8': 2, '9': 2}}, {0: {'"': {}, '\\': 1, ' ': {}}, 1: {'"': 2, '\\': 3, ' ': {}}, 2: {'"': 3, '\\': {}, ' ': {}}, 3: {'"': {}, '\\': {}, ' ': {}}}, {0: {'l': 1, 'e': {}, 't': {}, 'r': {}, ' ': 2, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 1: {'l': {}, 'e': 3, 't': {}, 'r': {}, ' ': {}, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 2: {'l': {}, 'e': 4, 't': {}, 'r': {}, ' ': {}, 'd': 5, 'i': {}, 'g': {}, '"': 6, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 3: {'l': {}, 'e': {}, 't': 7, 'r': {}, ' ': {}, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 4: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': {}, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': 8, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 5: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': {}, 'd': {}, 'i': 9, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 6: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': 10, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 7: {'l': {}, 'e': {}, 't': 11, 'r': {}, ' ': {}, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 8: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': {}, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': 12, 'a': {}, 'p': {}, 'o': {}}, 9: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': {}, 'd': {}, 'i': {}, 'g': 13, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 10: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': {}, 'd': {}, 'i': {}, 'g': {}, '"': 14, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 11: {'l': {}, 'e': 15, 't': {}, 'r': {}, ' ': {}, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 12: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': {}, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': 16, 'p': {}, 'o': {}}, 13: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': {}, 'd': {}, 'i': 17, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 14: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': 18, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 15: {'l': {}, 'e': {}, 't': {}, 'r': 19, ' ': {}, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 16: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': {}, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': 20, 'o': {}}, 17: {'l': {}, 'e': {}, 't': 21, 'r': {}, ' ': {}, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 18: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': {}, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 19: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': 22, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 20: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': {}, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': 23, 'p': {}, 'o': {}}, 21: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': 24, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 22: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': 18, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 23: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': {}, 'd': 25, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 24: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': 18, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': {}}, 25: {'l': {}, 'e': {}, 't': {}, 'r': {}, ' ': {}, 'd': {}, 'i': {}, 'g': {}, '"': {}, 's': {}, 'c': {}, 'a': {}, 'p': {}, 'o': 18}}, {0: {'"': {}, 'a': {}, 'b': {}, 'c': {}, 'd': {}, 'e': {}, 'f': {}, 'g': {}, 'h': {}, 'i': {}, 'j': {}, 'k': {}, 'l': {}, 'm': {}, 'n': {}, 'o': {}, 'p': {}, 'q': {}, 'r': {}, 's': {}, 't': {}, 'u': {}, 'v': {}, 'w': {}, 'x': {}, 'y': {}, 'z': {}, 'A': {}, 'B': {}, 'C': {}, 'D': {}, 'E': {}, 'F': {}, 'G': {}, 'H': {}, 'I': {}, 'J': {}, 'K': {}, 'L': {}, 'M': {}, 'N': {}, 'O': {}, 'P': {}, 'Q': {}, 'R': {}, 'S': {}, 'T': {}, 'U': {}, 'V': {}, 'W': {}, 'X': {}, 'Y': {}, 'Z': {}, '0': {}, '1': {}, '2': {}, '3': {}, '4': {}, '5': {}, '6': {}, '7': {}, '8': {}, '9': {}, ' ': {}, '\\': 1}, 1: {'"': 2, 'a': {}, 'b': {}, 'c': {}, 'd': {}, 'e': {}, 'f': {}, 'g': {}, 'h': {}, 'i': {}, 'j': {}, 'k': {}, 'l': {}, 'm': {}, 'n': {}, 'o': {}, 'p': {}, 'q': {}, 'r': {}, 's': {}, 't': {}, 'u': {}, 'v': {}, 'w': {}, 'x': {}, 'y': {}, 'z': {}, 'A': {}, 'B': {}, 'C': {}, 'D': {}, 'E': {}, 'F': {}, 'G': {}, 'H': {}, 'I': {}, 'J': {}, 'K': {}, 'L': {}, 'M': {}, 'N': {}, 'O': {}, 'P': {}, 'Q': {}, 'R': {}, 'S': {}, 'T': {}, 'U': {}, 'V': {}, 'W': {}, 'X': {}, 'Y': {}, 'Z': {}, '0': {}, '1': {}, '2': {}, '3': {}, '4': {}, '5': {}, '6': {}, '7': {}, '8': {}, '9': {}, ' ': {}, '\\': 1}, 2: {'"': 2, 'a': {}, 'b': {}, 'c': {}, 'd': {}, 'e': {}, 'f': {}, 'g': {}, 'h': {}, 'i': {}, 'j': {}, 'k': {}, 'l': {}, 'm': {}, 'n': {}, 'o': {}, 'p': {}, 'q': {}, 'r': {}, 's': {}, 't': {}, 'u': {}, 'v': {}, 'w': {}, 'x': {}, 'y': {}, 'z': {}, 'A': {}, 'B': {}, 'C': {}, 'D': {}, 'E': {}, 'F': {}, 'G': {}, 'H': {}, 'I': {}, 'J': {}, 'K': {}, 'L': {}, 'M': {}, 'N': {}, 'O': {}, 'P': {}, 'Q': {}, 'R': {}, 'S': {}, 'T': {}, 'U': {}, 'V': {}, 'W': {}, 'X': {}, 'Y': {}, 'Z': {}, '0': {}, '1': {}, '2': {}, '3': {}, '4': {}, '5': {}, '6': {}, '7': {}, '8': {}, '9': {}, ' ': {}, '\\': 1}}]
iniciales = [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]]
finales = [[1], [1], [1], [1], [1], [1, 3], [1], [1, 2], [1], [1], [1], [1], [0, 3, 4], [3], [18], [2]]
archiv = "alta.txt"
reservadas = ['IF', 'FOR', 'WHILE', 'ELSE']
vacio = {}
operadores_reservados = ['(', ')', '*', '+', '-', '/', '^']
tokens = ['!$.*', 'digits', 'hexdigit', 'id', 'number', 'string']
tabla = {'delim': '( |\t|\n)', 'ws': '( |\t|\n)( |\t|\n)*', 'digit': '(0|1|2|3|4|5|6|7|8|9)', 'digits': '(0|1|2|3|4|5|6|7|8|9)(0|1|2|3|4|5|6|7|8|9)*', 'sign': '(+|-)', 'number': '((+|-))(0|1|2|3|4|5|6|7|8|9)(0|1|2|3|4|5|6|7|8|9)*(,(0|1|2|3|4|5|6|7|8|9)(0|1|2|3|4|5|6|7|8|9)*)', 'letter': '(a|b|c|d|e|f|g|h|i|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z|A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z)', 'id': '(a|b|c|d|e|f|g|h|i|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z|A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z)((a|b|c|d|e|f|g|h|i|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z|A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z)|(0|1|2|3|4|5|6|7|8|9)(0|1|2|3|4|5|6|7|8|9)*)*', 'letterh': '(A|B|C|D|E|F)', 'lettersh': '(A|B|C|D|E|F)(A|B|C|D|E|F)*', 'digite': '(0|1|2|3|4|5|6|7|8|9)', 'digitse': '(0|1|2|3|4|5|6|7|8|9)(0|1|2|3|4|5|6|7|8|9)*', 'hexdigit': '(((A|B|C|D|E|F))((0|1|2|3|4|5|6|7|8|9)))|(((0|1|2|3|4|5|6|7|8|9))((A|B|C|D|E|F)))*', 'escapado': '"\\\\\\\\" | "\\\\\\""', 'char': 'letter  | digit  | " " | escapado', 'string': '"((a|b|c|d|e|f|g|h|i|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z|A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z|0|1|2|3|4|5|6|7|8|9| |\\\\|\\")*)"'}
diccionario_cadenas = {}
vacio2 = {}
cadena_strings = []
    
def main():
    
    # Juntando la lista de reservadas, operadores_reservados y tokens.
    lista = []
    lista.extend(reservadas)
    lista.extend(operadores_reservados)
    lista.extend(tokens)

    res_copy = reservadas.copy()
    
    cad_s = [] # Arreglo para las cadenas a simular.
    t = []
    cads = []


    with open(archiv, "r") as archivo:
        for linea in archivo:
            # Si la cadena empieza y termina con "", no se separa.
            if linea[0] == '"' and linea[-1] == '"':
                cad_s.append(linea.strip())
                cads.append(linea.strip())
            else:
                # Eliminando saltos de línea y separando las cadenas.
                cadenas = linea.strip().split()
                # Agregando las cadenas a la lista global cad_s.
                for cadena in cadenas:
                    if cadena[0] == '"' and cadena[-1] == '"':
                        cad_s.append(cadena.strip())
                        cads.append(linea.strip())
                    else:
                        cad_s.extend(cadena.split())
                        cads.append(linea.strip())
                # Agregando los tokens a la lista global tokens.
                t.extend(cadenas)

                cads.extend(linea.strip())

                # Regresar las cadenas separadas a self.cad_s.
                cad_s.extend(cadenas)
    
    simular_cadenas(diccionarios, cad_s, iniciales, finales) # Simulando las cadenas del txt.

    simular_res() # Haciendo otras cosas.
    
    #print("Listas: ", cad_s, t, cads)

# Método para simular las cadenas.
def simular_cadenas(diccionarios, cad_s, iniciales, finales, resultado=[]):
    
    if not diccionarios:
        return resultado
    
    if len(cad_s) == 0:
        # Si ya no quedan más cadenas por simular, se devuelve el resultado.
        return resultado
    else: 

        # Se toma la primera cadena en la lista de cadenas.
        cadena_actual = cad_s.pop(0)

        #print("Cadena actual ", cadena_actual)

        # Sacando una copia de la cadena.
        cadena_copy = cadena_actual
        
        # Si la cadena empieza y termina con comillas dobes, es porque es una cadena entera la que se debe simular.
        if cadena_actual[0] == '"' and cadena_actual[-1] == '"':
            # Si la cadena empieza y termina con comiilas, entonces se simula todo de un solo, sin dividirlo.
            # Se quitan las comillas.
            cadena_actual = cadena_actual.replace('"', '')

        
        valores_cadena = []
        for i in range(len(diccionarios)):
            diccionario = diccionarios[i]
            estado_ini = iniciales[i]
            estados_acept = finales[i]
            estado_actual = estado_ini[0]

            if len(cadena_actual) == 1:
                
                # Detectando los operadores.
                if cadena_actual in operadores_reservados:
                    
                    if i == len(diccionarios) - 1:
                        valores_cadena.append(True)
                
                else:

                    # Verificando que se haya llegado al último diccionario.
                    if i == len(diccionarios) - 1:
                        valores_cadena.append(False)
            
            # Se simula la cadena en el diccionario actual.
            for j in range(len(cadena_actual) - 1):
                caracter_actual = cadena_actual[j]
                caracter_siguiente = cadena_actual[j+1]

                v, estado_actual = simular_cadena(diccionario, estado_actual, caracter_actual, caracter_siguiente, estados_acept)
                
                #print("v: ", v, "estado_actual: ", estado_actual)
                #print(valores_cadena)

                # Si hay un estado igual a vacío, entonces regresarlo al inicial.
                if estado_actual == vacio:
                    estado_actual = estado_ini[0]
                
                if j == len(cadena_actual) - 2:
                    valores_cadena.append(v)
        
        # Verificando si en la tabla está la definición de string.
        if 'string' in tabla: 
            
            # Si la cadena actual tenía " al principio y al final, entonces es string.
            if cadena_copy[0] == '"' and cadena_copy[-1] == '"':
                
                cadena_strings.append(cadena_copy)

                valores_cadena[-1] = True
            else:
                valores_cadena[-1] = False
        
        # Verificando si hay un endline en la tabla.
        if 'endline' in tabla:
            endline = tabla['endline']

            # Quitando los paréntesis al endline.
            endline = endline.replace('(', '')
            endline = endline.replace(')', '')

            # 8 y 9.
            if valores_cadena[7] == True and valores_cadena[8] == True:
                pass
            elif valores_cadena[7] == False and valores_cadena[8] == False:
                pass
            elif valores_cadena[7] == False and valores_cadena[8] == True:

                if cadena_actual in reservadas: # Si la cadena es reservada, entonces no pasa nada. 
                    pass
                
                else:
                    for i in range(len(valores_cadena)):
                        valores_cadena[i] == False
        
        # Guardando la cadena y sus resultados en un diccionario.
        diccionario_cadenas[cadena_actual] = valores_cadena

        # Se agrega la lista de valores de la cadena actual al resultado.
        resultado.append(valores_cadena)

        # Verificando si hay un true en la lista de valores cadena.
        if True in valores_cadena:
            pass
        else: 
            with open(archiv, "r") as ar:
                for a, linea in enumerate(ar):
                    if cadena_actual in linea:
                        print("Sintax error: " + cadena_actual + " line: ", a+1)


    #print("Resultado: ", diccionario_cadenas)
    return simular_cadenas(diccionarios, cad_s, iniciales, finales, resultado) # Recursión.


def simular_cadena(diccionario, estado_actual, caracter_actual, caracter_siguiente, estados_acept):
    #print("Estados de aceptación: ", estados_acept)

    transiciones = diccionario[estado_actual]

    #print("Transiciones; ", transiciones)

    # print("Caracter actual: ", caracter_actual)

    if caracter_actual in transiciones:
        estado_siguiente = transiciones[caracter_actual]

        #print("Estado siguiente: ", estado_siguiente)

        if estado_siguiente in estados_acept:
            #print("Cadena aceptada.")
            return True, estado_actual
        
        # if estado_actual in estados_acept:
        #     print("Cadena aceptada.")
        #     return True, estado_actual

        if estado_siguiente == vacio:

            #print("Falso en caracter actual", estado_siguiente)
            # print("Estado actual: ", estado_actual)
            # print("Estado siguiente: ", estado_siguiente)

            return False, estado_actual
        
        elif estado_siguiente in estados_acept:
            #print("Cadena aceptada.")
            return True, estado_actual
    
        else:

            #print("Estado: ",estado_actual, estado_actual in estados_acept)

            # Si el estado siguiente es vacío.
            return True, estado_siguiente
        
    elif caracter_siguiente in transiciones:

        # Si no hay transición para el caracter actual, pero sí para el siguiente.
        estado_siguiente = transiciones[caracter_siguiente]

        if estado_siguiente in estados_acept:
            #print("Cadena aceptada.")
            return True, estado_siguiente

        if estado_siguiente == vacio:
            
            #print("Falso en caracter siguiente", estado_siguiente)

            # Si el estado siguiente no es vacío.
            return False, estado_siguiente
        
        elif estado_siguiente in estados_acept:
            #print("Cadena aceptada.")
            return True, estado_siguiente
    
        else:
            #print("Estado: ", estado_siguiente)
            #print("Estado: ", estado_siguiente in estados_acept)
            # Si el estado siguiente es vacío.
            return True, estado_siguiente
    
    elif caracter_actual not in transiciones:

        return False, estado_actual
        
    else:

        #print("Estado actual: ", estado_actual, transiciones)

        if transiciones != vacio:
            # Si no hay transición para el caracter actual ni para el siguiente.
            return True, estado_actual
        
        else: 
        
            # Si no hay transición para el caracter actual ni para el siguiente.
            return False, estado_actual

def simular_res(): # Simulando otras cosas.

    # Variables de seguimiento.
    ultima_vez_operador = False
    ultima_vez_reservada = False
    ultima_vez_token = vacio

    diccionario = vacio

    for clave in tokens:
        ultima_vez_token[clave] = False
    
    print(diccionario_cadenas)

    for clave in diccionario_cadenas:
        lista = diccionario_cadenas[clave]

        # Detectando los errores.
        if len(lista) == 1:
            if lista[0] == True:
                print("Operador detectado")
            
            elif lista[0] == False:
                # Abriendo el archivo para buscar el caracter.
                with open(archiv, "r") as ar:
                    for a, linea in enumerate(ar):
                        if clave in linea:
                            print("Sintax error: " + clave + " line: ", a+1)
        
        for i, valor in enumerate(lista):

            # BUscando el token en la tabla de símbolos definida.
            for s, (key, value) in enumerate(tabla.items()):

                if valor == True:

                    if i == s:
                        # En el caso de los tokens encontrados, imprime el último que se encontró de cada uno.
                        if key in tokens:
                            if clave in reservadas:
                                # Si la cadena actual es una palabra reservada, se agrega a la lista de resultados.
                                print("Palabra reservada: ", clave)
                                ultima_vez_reservada = True
                                ultima_vez_token[key] = False
                                ultima_vez_operador = False
                            
                            elif key in operadores_reservados:

                                if not ultima_vez_operador:
                                    print("Operador reservado: ", clave)
                                    ultima_vez_operador = True
                                    ultima_vez_reservada = False
                                    ultima_vez_token[key] = False
                            else: 

                                ultima_vez_operador = False
                                ultima_vez_reservada = False
                                ultima_vez_token[key] = True

                                diccionario[clave] = key

    print("Diccionario: ", diccionario)    
    
    new_dict =  vacio2

    for k, v in diccionario.items():
        if not isinstance(v, bool):
            new_dict[k] = v
    
    print("Diccionario: ", new_dict)
    
    # Imprimiendo los tokens encontrados.
    for keys, value in new_dict.items():


        if value == "string":
            #print("Token: "" + keys + "" type: " + value)

            string2 = cadena_strings.pop()

            comillas = 0
            palabra = ''
            for c in string2:
                if c == '"':
                    comillas += 1
                    if comillas == 2:
                        print('"' + palabra.strip() + '"' + " type: " + value)
                        palabra = ''
                        comillas = 0
                else:
                    palabra += c
            if palabra:
                print('"' + palabra.strip() + '"')

        else: 
            print("Token: " + keys + " type: " + value)
                

if __name__ == "__main__":
    main()

